# üîÑ ML Data Pipeline Flow - –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

## –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏

### üìä –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

–õ–æ–≥–∏ –º–æ–≥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å:
- **–° —Ä–∞–∑–º–µ—Ç–∫–æ–π** (domain/label –∫–æ–ª–æ–Ω–∫–∞ –µ—Å—Ç—å)
- **–ë–µ–∑ —Ä–∞–∑–º–µ—Ç–∫–∏** (—Ç–æ–ª—å–∫–æ text)

Pipeline –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ–±–∞ —Å–ª—É—á–∞—è!

---

## üîÑ –ü–æ–ª–Ω—ã–π Flow (8 —à–∞–≥–æ–≤)

### –®–∞–≥ 1: ETL (Extract, Transform, Load)

```python
from src.pipeline import ETLProcessor

# –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–∞
df = ETLProcessor().process_file("logs.xlsx")
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ß–∏—Ç–∞–µ—Ç XLSX/CSV/JSON/JSONL/Parquet
- –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –∫–æ–ª–æ–Ω–∫–∏
- –û—á–∏—â–∞–µ—Ç —Ç–µ–∫—Å—Ç
- –£–¥–∞–ª—è–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã
- –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É

**–í—ã—Ö–æ–¥:**
```python
DataFrame:
  text         | domain (–µ—Å–ª–∏ –µ—Å—Ç—å) | ts | user_id
  ----------------------------------------------------
  "–ø–µ—Ä–µ–¥–∞—Ç—å... | house              | ...| ...
```

---

### –®–∞–≥ 2: Labeler - –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –º–µ—Ç–æ–∫

```python
from src.pipeline import LabelerAgent, QualityControl

# –ï—Å–ª–∏ –ª–æ–≥–∏ –£–ñ–ï –° –ú–ï–¢–ö–ê–ú–ò - –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä—è–µ–º!
if "domain" in df.columns:
    validation_results = await quality_control.validate_existing_labels(
        items=[{"text": row["text"], "domain_id": row["domain"]} for _, row in df.iterrows()],
        labeler_agent=labeler_agent
    )
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å** —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –º–µ—Ç–æ–∫ —á–µ—Ä–µ–∑ LLM
- –ù–∞—Ö–æ–¥–∏—Ç **–æ—à–∏–±–∫–∏** –≤ –∏—Å—Ö–æ–¥–Ω–æ–π —Ä–∞–∑–º–µ—Ç–∫–µ
- **–ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç** –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –º–µ—Ç–∫–∏
- –õ–æ–≥–∏—Ä—É–µ—Ç –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è

**–ó–∞—á–µ–º:**
- ‚úÖ –ò—Å—Ö–æ–¥–Ω–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Ç–æ—á–Ω–æ–π
- ‚úÖ –ù–∞—Ö–æ–¥–∏–º —Å–∏—Å—Ç–µ–º–Ω—ã–µ –æ—à–∏–±–∫–∏
- ‚úÖ –£–ª—É—á—à–∞–µ–º –∫–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–∏–º–µ—Ä:**
```
–ò—Å—Ö–æ–¥–Ω–∞—è –º–µ—Ç–∫–∞: "payments"
–ü—Ä–æ–≤–µ—Ä–∫–∞ LLM:   "house"
–í–µ—Ä–¥–∏–∫—Ç:        ‚úó –û—à–∏–±–∫–∞! ‚Üí –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ "house"
```

**–í—ã—Ö–æ–¥:**
```python
[
  ValidationResult(
    text="–ø–µ—Ä–µ–¥–∞—Ç—å –ø–æ–∫–∞–∑–∞–Ω–∏—è",
    original_domain="payments",    # ‚Üê –±—ã–ª–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
    validated_domain="house",      # ‚Üê –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
    is_correct=False,
    confidence=0.92
  ),
  ...
]
```

---

### –®–∞–≥ 3: Augmenter - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–Ω—Ç–µ—Ç–∏–∫–∏

```python
# –ë–µ—Ä–µ–º –¢–û–õ–¨–ö–û —É–≤–µ—Ä–µ–Ω–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã (confidence >= 0.7)
high_conf_items = [r for r in results if r.confidence >= 0.7]

# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø–µ—Ä–µ—Ñ—Ä–∞–∑–∏—Ä–æ–≤–∫–∏
synthetic = await augmenter_agent.augment_batch(high_conf_items)
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç **–ø–µ—Ä–µ—Ñ—Ä–∞–∑–∏—Ä–æ–≤–∫–∏** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç **—Å–µ–º–∞–Ω—Ç–∏–∫—É** –∏ **–¥–æ–º–µ–Ω**
- –°–æ–∑–¥–∞–µ—Ç **—Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ** —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–æ–∫

**–ü—Ä–∏–º–µ—Ä:**
```
–û—Ä–∏–≥–∏–Ω–∞–ª: "–ø–µ—Ä–µ–¥–∞—Ç—å –ø–æ–∫–∞–∑–∞–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–∞"
–î–æ–º–µ–Ω:    house

–°–∏–Ω—Ç–µ—Ç–∏–∫–∞:
1. "–ø–æ–¥–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å –ø—Ä–∏–±–æ—Ä–∞ —É—á–µ—Ç–∞"
2. "–æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–∫–∞–∑–∞–Ω–∏—è –≤–æ–¥–æ–º–µ—Ä–∞"  
3. "–ø–µ—Ä–µ–¥–∞—Ç—å —Ü–∏—Ñ—Ä—ã —Å–æ —Å—á—ë—Ç—á–∏–∫–∞"
```

**–í—ã—Ö–æ–¥:**
```python
[
  AugmentedSample(
    text="–ø–æ–¥–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å –ø—Ä–∏–±–æ—Ä–∞ —É—á–µ—Ç–∞",
    domain_id="house",  # ‚Üê –æ—Ç Augmenter, –ù–û –ï–©–ï –ù–ï –ü–†–û–í–ï–†–ï–ù–û!
    source="synthetic",
    original_text="–ø–µ—Ä–µ–¥–∞—Ç—å –ø–æ–∫–∞–∑–∞–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–∞"
  ),
  ...
]
```

---

### –®–∞–≥ 4: Quality Control - –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ üÜï

```python
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞—á–µ—Å—Ç–≤–æ —Å–∏–Ω—Ç–µ—Ç–∏–∫–∏
validated_synthetic = await quality_control.validate_and_label_synthetic(
    synthetic_items=synthetic,
    original_items=high_conf_items,
    labeler_agent=labeler_agent
)
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**

#### 4.1 –ö–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ (TF-IDF)
```python
# –ü—Ä–æ–≤–µ—Ä—è–µ—Ç semantic similarity
cosine_sim = cosine_similarity(tfidf(original), tfidf(synthetic))

‚úì 0.3 < sim < 0.95  # –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω
‚úó sim < 0.3         # –°–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ –æ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª–∞ (–ø–æ—Ç–µ—Ä—è–Ω–∞ —Å–µ–º–∞–Ω—Ç–∏–∫–∞)
‚úó sim > 0.95        # –°–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ (–¥—É–±–ª–∏–∫–∞—Ç)
```

#### 4.2 –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –õ–µ–≤–µ–Ω—à—Ç–µ–π–Ω–∞ (—Ä–µ–¥–∞–∫—Ü–∏–∏)
```python
# –ü—Ä–æ–≤–µ—Ä—è–µ—Ç lexical similarity
lev_distance = levenshtein("–æ—Ä–∏–≥–∏–Ω–∞–ª", "—Å–∏–Ω—Ç–µ—Ç–∏–∫–∞")
lev_ratio = lev_distance / max_length

‚úì lev_distance >= 3   # –ú–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞ –∏–∑–º–µ–Ω–µ–Ω–æ
‚úì lev_ratio <= 0.8    # –ú–∞–∫—Å–∏–º—É–º 80% —Å—Ç—Ä–æ–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–æ
‚úó lev_distance < 3    # –°–ª–∏—à–∫–æ–º –º–∞–ª–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π (–ø–æ—á—Ç–∏ –¥—É–±–ª–∏–∫–∞—Ç)
‚úó lev_ratio > 0.8     # –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π (–¥—Ä—É–≥–æ–π —Ç–µ–∫—Å—Ç)
```

**–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏:**
```
–û—Ä–∏–≥–∏–Ω–∞–ª:  "–ø–µ—Ä–µ–¥–∞—Ç—å –ø–æ–∫–∞–∑–∞–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–∞"     (31 —Å–∏–º–≤–æ–ª)
–°–∏–Ω—Ç–µ—Ç–∏–∫–∞: "–ø–æ–¥–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å –ø—Ä–∏–±–æ—Ä–∞ —É—á–µ—Ç–∞"   (33 —Å–∏–º–≤–æ–ª–∞)

–ö–æ—Å–∏–Ω—É—Å–Ω–æ–µ: 0.72 ‚úì (–≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 0.3-0.95)
–õ–µ–≤–µ–Ω—à—Ç–µ–π–Ω: 28   ‚úì (>= 3)
Ratio:      0.85 ‚úó (> 0.8) ‚Üê –û–¢–ö–õ–û–ù–ï–ù–û!

–í–µ—Ä–¥–∏–∫—Ç: —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π, —Ç–µ—Ä—è–µ—Ç—Å—è —Å–µ–º–∞–Ω—Ç–∏–∫–∞
```

**–ó–∞—á–µ–º:**
- ‚úÖ **–î—É–±–ª–∏–∫–∞—Ç—ã** –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –¥–∞—Ç–∞—Å–µ—Ç (sim > 0.95)
- ‚úÖ **–ú—É—Å–æ—Ä** –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç (sim < 0.3)
- ‚úÖ **–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ** –ø–µ—Ä–µ—Ñ—Ä–∞–∑–∏—Ä–æ–≤–∫–∏ (–≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ)
- ‚úÖ **–ö–æ–Ω—Ç—Ä–æ–ª—å** –∑–∞ –∞–≥–µ–Ω—Ç–æ–º

**–í—ã—Ö–æ–¥:**
```python
# –¢–æ–ª—å–∫–æ –≤–∞–ª–∏–¥–Ω–∞—è —Å–∏–Ω—Ç–µ—Ç–∏–∫–∞
[
  {
    "text": "–ø–æ–¥–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å –ø—Ä–∏–±–æ—Ä–∞ —É—á–µ—Ç–∞",
    "domain_id": "house",  # ‚Üê –≤—Å—ë –µ—â–µ –æ—Ç Augmenter
    "quality_metrics": {
      "cosine_similarity": 0.72,
      "levenshtein_distance": 15,
      "is_valid": True
    }
  },
  ...
]
```

---

### –®–∞–≥ 5: Labeler (–ø–æ–≤—Ç–æ—Ä–Ω–æ) - –†–∞–∑–º–µ—Ç–∫–∞ —Å–∏–Ω—Ç–µ—Ç–∏–∫–∏ üÜï

```python
# –í–ê–ñ–ù–û: –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ–º–µ–Ω—ã —Å–∏–Ω—Ç–µ—Ç–∏–∫–∏ —á–µ—Ä–µ–∑ LLM!
for synthetic_item in validated_synthetic:
    result = await labeler_agent.classify_one(synthetic_item["text"])
    
    # –ï—Å–ª–∏ –¥–æ–º–µ–Ω –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç - –∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–≤—ã–π!
    if result.domain_id != synthetic_item["domain_id"]:
        logger.warning(f"Domain corrected: {synthetic_item['domain_id']} ‚Üí {result.domain_id}")
        synthetic_item["domain_id"] = result.domain_id
```

**–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ:**

Augmenter –º–æ–∂–µ—Ç **–æ—à–∏–±–∏—Ç—å—Å—è** –∏–ª–∏ **—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ–≥—Ä–∞–Ω–∏—á–Ω—ã–π —Å–ª—É—á–∞–π**:

```
–û—Ä–∏–≥–∏–Ω–∞–ª:  "–ø–µ—Ä–µ–¥–∞—Ç—å –ø–æ–∫–∞–∑–∞–Ω–∏—è" ‚Üí domain: house
                ‚Üì Augmenter
–°–∏–Ω—Ç–µ—Ç–∏–∫–∞: "—Å–æ–æ–±—â–∏—Ç—å –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø—Ä–∏–±–æ—Ä–∞"
                ‚Üì QualityControl (–ø—Ä–æ–ø—É—Å—Ç–∏–ª - –∫–∞—á–µ—Å—Ç–≤–æ –û–ö)
                ‚Üì Labeler –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä—è–µ—Ç
–†–µ–∑—É–ª—å—Ç–∞—Ç: "okc" ‚Üê –≠–¢–û –í–û–ü–†–û–°, –∞ –Ω–µ –ø–µ—Ä–µ–¥–∞—á–∞! –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ!
```

**–ó–∞—â–∏—Ç–∞ –æ—Ç:**
- ‚ùå Augmenter —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª —Ç–µ–∫—Å—Ç –¥—Ä—É–≥–æ–≥–æ –¥–æ–º–µ–Ω–∞
- ‚ùå –ü–æ–≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏
- ‚ùå –†–∞–∑–º–Ω–æ–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫

**–í—ã—Ö–æ–¥:**
```python
[
  {
    "text": "–ø–æ–¥–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å –ø—Ä–∏–±–æ—Ä–∞ —É—á–µ—Ç–∞",
    "domain_id": "house",        # ‚Üê –ü–†–û–í–ï–†–ï–ù–û LLM!
    "domain_true": "house",
    "confidence": 0.88,
    "source": "synthetic_validated"
  },
  ...
]
```

---

### –®–∞–≥ 6: ReviewDataset - HITL

```python
# –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Ä—É—á–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∏–∑–∫—É—é —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å
low_conf = [r for r in all_results if r.confidence < 0.5]

review = ReviewDataset(config)
review.add_items(low_conf)
```

**–í—ã—Ö–æ–¥:** –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —á–µ–ª–æ–≤–µ–∫–æ–º –ø—Ä–∏–º–µ—Ä—ã —Å confidence=1.0

---

### –®–∞–≥ 7: DataWriter - –§–∏–Ω–∞–ª—å–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç

```python
# –°–æ–±–∏—Ä–∞–µ–º –í–°–Å:
all_items = (
    validated_originals +      # –û—Ä–∏–≥–∏–Ω–∞–ª—ã —Å –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
    validated_synthetic +      # –°–∏–Ω—Ç–µ—Ç–∏–∫–∞ (–ø—Ä–æ—à–ª–∞ QC + Labeler)
    reviewed_items             # –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–µ —á–µ–ª–æ–≤–µ–∫–æ–º
)

train_path, eval_path, stats = data_writer.write_datasets(all_items)
```

---

### –®–∞–≥ 8: DataStorage - –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

```python
version = data_storage.commit_version(
    train_path, eval_path,
    description="Validated + Synthetic + HITL"
)
```

---

## üéØ –ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —Ç–∞–∫–æ–π –ø–æ—Ä—è–¥–æ–∫?

### 1. **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –∞—É–≥–º–µ–Ω—Ç–∞—Ü–∏–µ–π**
```
‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º –∏—Å—Ö–æ–¥–Ω—ã–µ –º–µ—Ç–∫–∏
‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∏–Ω—Ç–µ—Ç–∏–∫—É –∏–∑ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –º–µ—Ç–æ–∫
```

### 2. **–ê—É–≥–º–µ–Ω—Ç–∞—Ü–∏—è –∏–∑ —É–≤–µ—Ä–µ–Ω–Ω—ã—Ö**
```
‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: Augmenter —Ä–∞–±–æ—Ç–∞–µ—Ç —Å quality >= 0.7
‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: –†–∞–∑–º–Ω–æ–∂–∞—Ç—å –Ω–µ—É–≤–µ—Ä–µ–Ω–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã
```

### 3. **Quality Control –ø–æ—Å–ª–µ Augmenter**
```
‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ Augmenter –Ω–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª –º—É—Å–æ—Ä
‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: –ü—Ä–æ–ø—É—Å–∫–∞—Ç—å –≤—Å—ë –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏
```

### 4. **Labeler –¥–ª—è —Å–∏–Ω—Ç–µ—Ç–∏–∫–∏**
```
‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: LLM –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ–º–µ–Ω —Å–∏–Ω—Ç–µ—Ç–∏–∫–∏
‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: –î–æ–≤–µ—Ä—è—Ç—å Augmenter –Ω–∞ 100%
```

---

## üìä –ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (100 –ª–æ–≥–æ–≤):
```
50 —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
30 —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏  
20 –±–µ–∑ –º–µ—Ç–æ–∫
```

### –ü–æ—Å–ª–µ Labeler (—à–∞–≥ 2):
```
50 –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–æ (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ)
30 –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (–±—ã–ª–∏ –æ—à–∏–±–∫–∏)
20 —Ä–∞–∑–º–µ—á–µ–Ω–æ –∑–∞–Ω–æ–≤–æ
‚Üí 100 —Ç–µ–∫—Å—Ç–æ–≤ —Å –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
```

### –ü–æ—Å–ª–µ Augmenter (—à–∞–≥ 3):
```
70 —É–≤–µ—Ä–µ–Ω–Ω—ã—Ö (conf >= 0.7) √ó 3 –≤–∞—Ä–∏–∞–Ω—Ç–∞ = 210 —Å–∏–Ω—Ç–µ—Ç–∏–∫–∏
```

### –ü–æ—Å–ª–µ QualityControl (—à–∞–≥ 4):
```
210 —Å–∏–Ω—Ç–µ—Ç–∏–∫–∏
- 20 –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ (sim < 0.3 –∏–ª–∏ sim > 0.95)
- 15 –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ (Levenshtein –ø—Ä–æ–±–ª–µ–º—ã)
‚Üí 175 –≤–∞–ª–∏–¥–Ω–æ–π —Å–∏–Ω—Ç–µ—Ç–∏–∫–∏
```

### –ü–æ—Å–ª–µ Labeler #2 (—à–∞–≥ 5):
```
175 —Å–∏–Ω—Ç–µ—Ç–∏–∫–∏ ‚Üí LLM –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä–∫–∞
- 165 –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ (–¥–æ–º–µ–Ω —Å–æ–≤–ø–∞–ª)
- 10 –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (–¥–æ–º–µ–Ω –∏–∑–º–µ–Ω–µ–Ω)
‚Üí 175 –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–∑–º–µ—á–µ–Ω–Ω–æ–π —Å–∏–Ω—Ç–µ—Ç–∏–∫–∏
```

### –ü–æ—Å–ª–µ Review (—à–∞–≥ 6):
```
25 —Å –Ω–∏–∑–∫–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é ‚Üí HITL
‚Üí 25 –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ —á–µ–ª–æ–≤–µ–∫–æ–º
```

### –§–∏–Ω–∞–ª—å–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç (—à–∞–≥–∏ 7-8):
```
100 –æ—Ä–∏–≥–∏–Ω–∞–ª–æ–≤ (–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö)
175 —Å–∏–Ω—Ç–µ—Ç–∏–∫–∏ (–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∏ —Ä–∞–∑–º–µ—á–µ–Ω–Ω–æ–π)
25 –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö —á–µ–ª–æ–≤–µ–∫–æ–º
= 300 –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è!
```

---

## üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ

| –®–∞–≥ | –ó–∞—â–∏—Ç–∞ | –ú–µ—Ç—Ä–∏–∫–∞ |
|-----|--------|---------|
| 1. ETL | –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è, –≤–∞–ª–∏–¥–∞—Ü–∏—è | duplicates_removed |
| 2. Labeler | –ü–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç–æ–∫ | relabeled_count |
| 3. Augmenter | –¢–æ–ª—å–∫–æ conf >= 0.7 | high_conf_used |
| 4. QualityControl | Cosine + Levenshtein | pass_rate |
| 5. Labeler #2 | –†–∞–∑–º–µ—Ç–∫–∞ —Å–∏–Ω—Ç–µ—Ç–∏–∫–∏ | relabeled_synthetic |
| 6. Review | –ß–µ–ª–æ–≤–µ–∫ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç | hitl_corrections |
| 7. DataWriter | –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –¥–æ–º–µ–Ω–æ–≤ | balance_cv |
| 8. DataStorage | –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ | version_tag |

---

## üí° –ö–ª—é—á–µ–≤—ã–µ –∏–Ω—Å–∞–π—Ç—ã

### –ó–∞—á–µ–º Labeler –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –î–í–ê–ñ–î–´?

#### –ü–µ—Ä–≤—ã–π –≤—ã–∑–æ–≤ (—à–∞–≥ 2):
**–¶–µ–ª—å:** –í–∞–ª–∏–¥–∞—Ü–∏—è –∏—Å—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä—è–µ–º **—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–µ—Ç–∫–∏** (–µ—Å–ª–∏ –µ—Å—Ç—å)
- –†–∞–∑–º–µ—á–∞–µ–º **–Ω–æ–≤—ã–µ —Ç–µ–∫—Å—Ç—ã** (–µ—Å–ª–∏ –º–µ—Ç–æ–∫ –Ω–µ—Ç)
- –û–ø—Ä–µ–¥–µ–ª—è–µ–º **—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞

#### –í—Ç–æ—Ä–æ–π –≤—ã–∑–æ–≤ (—à–∞–≥ 5):
**–¶–µ–ª—å:** –†–∞–∑–º–µ—Ç–∫–∞ —Å–∏–Ω—Ç–µ—Ç–∏–∫–∏
- –ü—Ä–æ–≤–µ—Ä—è–µ–º **–≥–µ–Ω–µ—Ä–∞—Ü–∏—é Augmenter**
- –ù–∞—Ö–æ–¥–∏–º **–ø–æ–≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏**
- –î–∞–µ–º **—Ñ–∏–Ω–∞–ª—å–Ω—É—é –º–µ—Ç–∫—É** —Å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é

### –ó–∞—á–µ–º Quality Control –º–µ–∂–¥—É Augmenter –∏ Labeler?

**–ü—Ä–æ–±–ª–µ–º–∞ –±–µ–∑ QC:**
```
Augmenter –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 1000 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
‚Üí –í—Å–µ 1000 –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ Labeler
‚Üí –î–µ–Ω—å–≥–∏/–≤—Ä–µ–º—è –Ω–∞ LLM –¥–ª—è –º—É—Å–æ—Ä–∞!
```

**–° Quality Control:**
```
Augmenter –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 1000 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
‚Üí QC –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤—ã–≤–∞–µ—Ç 200 –Ω–µ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö (cosine/Levenshtein)
‚Üí –¢–æ–ª—å–∫–æ 800 –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏–¥—É—Ç –Ω–∞ Labeler
‚Üí –≠–∫–æ–Ω–æ–º–∏—è 20% LLM –∑–∞–ø—Ä–æ—Å–æ–≤!
```

**–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:**
- üö´ **–î—É–±–ª–∏–∫–∞—Ç—ã** (cosine > 0.95)
- üö´ **–ú—É—Å–æ—Ä** (cosine < 0.3)
- üö´ **–°–ª–∏—à–∫–æ–º –ø–æ—Ö–æ–∂–∏–µ** (Levenshtein < 3)
- üö´ **–°–ª–∏—à–∫–æ–º —Ä–∞–∑–Ω—ã–µ** (Levenshtein > 80%)

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

### –ù–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ —Å–æ–±–∏—Ä–∞–µ–º:

```python
pipeline_stats = {
    "etl": {
        "processed_rows": 100,
        "duplicates_removed": 5,
        "filtered_rows": 2
    },
    "labeler_validation": {
        "total_validated": 100,
        "relabeled": 30,          # 30% –∏—Å—Ö–æ–¥–Ω—ã—Ö –º–µ—Ç–æ–∫ –±—ã–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ!
        "accuracy": 0.70
    },
    "augmenter": {
        "total_generated": 210,
        "avg_variants": 3
    },
    "quality_control": {
        "total_checked": 210,
        "passed": 175,            # 83% –ø—Ä–æ—à–ª–æ –ø—Ä–æ–≤–µ—Ä–∫—É
        "rejected_low_similarity": 15,
        "rejected_high_similarity": 5,
        "rejected_levenshtein": 15,
        "pass_rate": 0.83
    },
    "labeler_synthetic": {
        "total_labeled": 175,
        "domain_changed": 10,     # 5.7% —Å–∏–Ω—Ç–µ—Ç–∏–∫–∏ –ø–æ–ª—É—á–∏–ª–∏ –¥—Ä—É–≥–æ–π –¥–æ–º–µ–Ω!
        "avg_confidence": 0.86
    },
    "review": {
        "queue_size": 25,
        "reviewed": 25,
        "corrected": 3
    },
    "final_dataset": {
        "train": 240,
        "eval": 60,
        "quality_score": 0.92
    }
}
```

---

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ Flow

### ‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ
- –ò—Å—Ö–æ–¥–Ω—ã–µ –º–µ—Ç–∫–∏ **–ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω—ã**
- –°–∏–Ω—Ç–µ—Ç–∏–∫–∞ **–æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–∞** (cosine + Levenshtein)
- –°–∏–Ω—Ç–µ—Ç–∏–∫–∞ **—Ä–∞–∑–º–µ—á–µ–Ω–∞** —á–µ—Ä–µ–∑ LLM
- –ù–∏–∑–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å ‚Üí **HITL**

### ‚úÖ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- QC —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –º—É—Å–æ—Ä **–¥–æ** –¥–æ—Ä–æ–≥–æ–≥–æ LLM
- –≠–∫–æ–Ω–æ–º–∏—è 15-20% LLM –∑–∞–ø—Ä–æ—Å–æ–≤
- –¢–æ–ª—å–∫–æ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏–¥—É—Ç –¥–∞–ª—å—à–µ

### ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å
- **–ú–µ—Ç—Ä–∏–∫–∏** –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- **–¢—Ä–µ–∫–∏–Ω–≥** –∫–∞—á–µ—Å—Ç–≤–∞

### ‚úÖ –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- **–î–≤–æ–π–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞** —Å–∏–Ω—Ç–µ—Ç–∏–∫–∏ (QC + Labeler)
- **–í–∞–ª–∏–¥–∞—Ü–∏—è** –∏—Å—Ö–æ–¥–Ω—ã—Ö –º–µ—Ç–æ–∫
- **HITL** –¥–ª—è —Å–æ–º–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** –Ω–∏–∑–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞

---

## üöÄ –ò—Ç–æ–≥–æ

### –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π Flow:
```
1. ETL            - –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è
2. Labeler        - –≤–∞–ª–∏–¥–∞—Ü–∏—è/—Ä–∞–∑–º–µ—Ç–∫–∞ –∏—Å—Ö–æ–¥–Ω—ã—Ö
3. Augmenter      - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑ —É–≤–µ—Ä–µ–Ω–Ω—ã—Ö
4. QualityControl - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ cosine + Levenshtein
5. Labeler        - —Ä–∞–∑–º–µ—Ç–∫–∞ –≤–∞–ª–∏–¥–Ω–æ–π —Å–∏–Ω—Ç–µ—Ç–∏–∫–∏
6. Review         - HITL –¥–ª—è –Ω–∏–∑–∫–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
7. DataWriter     - —Å–±–æ—Ä–∫–∞ –¥–∞—Ç–∞—Å–µ—Ç–∞
8. DataStorage    - –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
```

### –ö–∞–∂–¥—ã–π —à–∞–≥ —É–ª—É—á—à–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ:
- **–®–∞–≥ 2:** –∏—Å–ø—Ä–∞–≤–ª—è–µ–º –æ—à–∏–±–∫–∏ –≤ –∏—Å—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–®–∞–≥ 3:** —É–º–Ω–æ–∂–∞–µ–º —Ö–æ—Ä–æ—à–∏–µ –ø—Ä–∏–º–µ—Ä—ã
- **–®–∞–≥ 4:** —Ñ–∏–ª—å—Ç—Ä—É–µ–º –Ω–µ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—É—é —Å–∏–Ω—Ç–µ—Ç–∏–∫—É
- **–®–∞–≥ 5:** –ø—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ–º–µ–Ω—ã —Å–∏–Ω—Ç–µ—Ç–∏–∫–∏
- **–®–∞–≥ 6:** —á–µ–ª–æ–≤–µ–∫ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–º–Ω–∏—Ç–µ–ª—å–Ω–æ–µ

### –†–µ–∑—É–ª—å—Ç–∞—Ç:
**–í—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç** –≥–æ—Ç–æ–≤—ã–π –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π! üéØ

---

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏!**

